<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.github.lishangbu.avalon.dataset.mapper.BerryFlavorMapper">

  <!-- 通用查询映射结果 -->
  <resultMap id="BaseResultMap" type="io.github.lishangbu.avalon.dataset.entity.BerryFlavor">
    <id column="id" property="id" />
    <result column="internal_name" property="internalName" />
    <result column="name" property="name" />
  </resultMap>

  <!-- 分页查询树果风味列表（支持动态条件） -->
  <select id="selectList" resultMap="BaseResultMap" parameterType="map">
    SELECT id, internal_name, name
    FROM berry_flavor
    <where>
      <if test="berryFlavor.id != null">
        AND id = #{berryFlavor.id}
      </if>
      <if test="berryFlavor.internalName != null and berryFlavor.internalName != ''">
        AND internal_name LIKE CONCAT('%', #{berryFlavor.internalName}, '%')
      </if>
      <if test="berryFlavor.name != null and berryFlavor.name != ''">
        AND name LIKE CONCAT('%', #{berryFlavor.name}, '%')
      </if>
    </where>
    ORDER BY id ASC
  </select>

</mapper>
